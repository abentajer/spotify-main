(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{323:function(e,t,r){e.exports=r.p+"img/default-album.c4b3b71.png"},330:function(e,t,r){"use strict";var n=[function(){var e=this._self._c;return e("div",{staticClass:"mb-8"},[e("img",{staticClass:"h-16 mx-auto drop-shadow-lg",attrs:{src:r(337),alt:"Spotify Logo"}})])}],o={name:"Sidebar"},c=(r(338),r(49)),component=Object(c.a)(o,(function(){var e=this,t=e._self._c;return t("aside",{staticClass:"w-64 bg-gradient-to-b from-black via-[#2d0036] to-[#1a0022] p-4 min-h-screen shadow-2xl border-r border-pink-900"},[e._m(0),e._v(" "),t("nav",[t("ul",[t("li",{staticClass:"mb-4"},[t("nuxt-link",{staticClass:"flex items-center text-pink-200 hover:text-pink-400 font-bold transition-colors duration-200",attrs:{to:"/",exact:"","active-class":"text-pink-400"}},[t("span",{staticClass:"material-icons mr-4 text-pink-400"},[e._v("home")]),e._v("\n          Accueil\n        ")])],1),e._v(" "),t("li",{staticClass:"mb-4"},[t("nuxt-link",{staticClass:"flex items-center text-pink-200 hover:text-pink-400 font-bold transition-colors duration-200",attrs:{to:"/dashboard","active-class":"text-pink-400"}},[t("span",{staticClass:"material-icons mr-4 text-pink-400"},[e._v("search")]),e._v("\n          Rechercher\n        ")])],1),e._v(" "),t("li",{staticClass:"mb-4"},[t("nuxt-link",{staticClass:"flex items-center text-pink-200 hover:text-pink-400 font-bold transition-colors duration-200",attrs:{to:"/library","active-class":"text-pink-400"}},[t("span",{staticClass:"material-icons mr-4 text-pink-400"},[e._v("library_music")]),e._v("\n          Votre Bibliothèque\n        ")])],1)])])])}),n,!1,null,"eaaee124",null);t.a=component.exports},331:function(e,t,r){var content=r(339);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(95).default)("85f0e516",content,!0,{sourceMap:!1})},337:function(e,t,r){e.exports=r.p+"img/logo-spotify.a162f1e.png"},338:function(e,t,r){"use strict";r(331)},339:function(e,t,r){var n=r(94)((function(i){return i[1]}));n.push([e.i,'.material-icons[data-v-eaaee124]{display:inline-block;font-family:"Material Icons";font-size:24px;font-style:normal;font-weight:400;letter-spacing:normal;line-height:1;text-transform:none;white-space:nowrap;word-wrap:normal;direction:ltr;-webkit-font-feature-settings:"liga";-webkit-font-smoothing:antialiased;transition:color .2s}.nuxt-link-exact-active[data-v-eaaee124]{color:#f472b6!important}',""]),n.locals={},e.exports=n},342:function(e,t,r){var content=r(369);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(95).default)("5cc08932",content,!0,{sourceMap:!1})},368:function(e,t,r){"use strict";r(342)},369:function(e,t,r){var n=r(94)((function(i){return i[1]}));n.push([e.i,"input[data-v-313b03de]{background-color:#333;border:1px solid #ccc;border-radius:5px;color:#fff;font-size:16px;margin-bottom:20px;padding:10px;width:100%}",""]),n.locals={},e.exports=n},403:function(e,t,r){"use strict";r.r(t);r(34),r(27),r(157),r(35),r(43),r(72),r(73),r(51),r(16),r(36);var n=r(14),o=r(26),c=(r(71),r(76));function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){Object(o.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v={components:{Sidebar:r(330).a},data:function(){return{player:null,deviceId:null,currentTrack:null,query:"",results:null,loading:!1}},mounted:function(){var e=this,t=localStorage.getItem("spotify_access_token");t?window.Spotify?this.initializePlayer(t):window.onSpotifyWebPlaybackSDKReady=function(){e.initializePlayer(t)}:console.error("Token non disponible. Veuillez vous reconnecter.")},methods:d(d({},Object(c.c)(["setDeviceId"])),{},{initializePlayer:function(e){var t=this;console.log("Initialisation du lecteur Spotify."),this.player=new Spotify.Player({name:"Spotify Clone Player",getOAuthToken:function(t){t(e)},volume:.5}),this.player.addListener("ready",(function(e){var r=e.device_id;console.log("Lecteur prêt avec Device ID :",r),t.deviceId=r,t.setDeviceId(r)})),this.player.addListener("player_state_changed",(function(e){if(e){var r,n,track=e.track_window.current_track;t.currentTrack={name:track.name,artist:null===(r=track.artists[0])||void 0===r?void 0:r.name,albumCover:null===(n=track.album.images[0])||void 0===n?void 0:n.url,albumName:track.album.name},console.log("Morceau en cours :",t.currentTrack)}})),this.player.connect().then((function(e){e?console.log("Lecteur Spotify connecté."):console.error("Échec de la connexion au lecteur Spotify.")}))},search:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.loading=!0,t.prev=1,n=localStorage.getItem("spotify_access_token")){t.next=6;break}return console.error("Token non disponible. Veuillez vous reconnecter."),t.abrupt("return");case 6:return t.next=8,e.$axios.$get("https://api.spotify.com/v1/search",{params:{q:e.query,type:"track"},headers:{Authorization:"Bearer ".concat(n)}});case 8:o=t.sent,e.results=(null===(r=o.tracks)||void 0===r?void 0:r.items)||[],t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),console.error("Erreur lors de la recherche :",(null===(c=t.t0.response)||void 0===c?void 0:c.data)||t.t0.message);case 15:return t.prev=15,e.loading=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,12,15,18]])})))()},playTrack:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,n=localStorage.getItem("spotify_access_token"),t.deviceId){r.next=5;break}return console.error("Device ID non disponible. Le lecteur n’est pas prêt."),r.abrupt("return");case 5:return r.next=7,t.$axios.$put("https://api.spotify.com/v1/me/player/play?device_id=".concat(t.deviceId),{uris:[e]},{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});case 7:console.log("Lecture démarrée pour ".concat(e)),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),console.error("Erreur lors du démarrage de la lecture :",(null===(o=r.t0.response)||void 0===o?void 0:o.data)||r.t0.message);case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},pausePlayback:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=localStorage.getItem("spotify_access_token"),e.deviceId){t.next=5;break}return console.error("Device ID non disponible. Le lecteur n’est pas prêt."),t.abrupt("return");case 5:return t.next=7,e.$axios.$put("https://api.spotify.com/v1/me/player/pause?device_id=".concat(e.deviceId),{},{headers:{Authorization:"Bearer ".concat(r)}});case 7:console.log("Lecture mise en pause."),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.error("Erreur lors de la mise en pause :",(null===(n=t.t0.response)||void 0===n?void 0:n.data)||t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()}})},f=(r(368),r(49)),component=Object(f.a)(v,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex h-screen bg-gray-900 text-white"},[t("Sidebar"),e._v(" "),t("main",{staticClass:"flex-1 overflow-y-auto"},[t("header",{staticClass:"p-4 bg-gray-900"},[t("div",{staticClass:"flex items-center"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],staticClass:"w-full p-2 bg-gray-800 rounded-full text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-green-500",attrs:{placeholder:"Rechercher des artistes, titres ou podcasts"},domProps:{value:e.query},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)},input:function(t){t.target.composing||(e.query=t.target.value)}}})])]),e._v(" "),t("section",{staticClass:"p-4"},[e.results?t("h2",{staticClass:"text-2xl font-bold mb-4"},[e._v("Résultats de recherche")]):e._e(),e._v(" "),e.results?t("div",{staticClass:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"},e._l(e.results,(function(n){var o,c;return t("div",{key:n.id,staticClass:"bg-gray-800 p-4 rounded-lg hover:bg-gray-700"},[t("img",{staticClass:"w-full h-48 object-cover mb-4 rounded",attrs:{src:(null===(o=n.album.images[0])||void 0===o?void 0:o.url)||r(323),alt:"Pochette de l'album ".concat(n.album.name)}}),e._v(" "),t("h3",{staticClass:"text-lg font-semibold mb-1"},[e._v(e._s(n.name))]),e._v(" "),t("p",{staticClass:"text-gray-400 mb-2"},[e._v(e._s(null===(c=n.artists[0])||void 0===c?void 0:c.name))]),e._v(" "),t("button",{staticClass:"w-full bg-green-500 hover:bg-green-600 text-white py-2 px-4 rounded",on:{click:function(t){return e.playTrack(n.uri)}}},[e._v("\n            Lire\n          ")])])})),0):e.loading?t("div",{staticClass:"text-center mt-8"},[t("svg",{staticClass:"animate-spin h-8 w-8 text-white mx-auto",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"}},[t("circle",{staticClass:"opacity-25",attrs:{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}}),e._v(" "),t("path",{staticClass:"opacity-75",attrs:{fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"}})]),e._v(" "),t("p",{staticClass:"mt-4"},[e._v("Recherche en cours...")])]):e._e()]),e._v(" "),e.currentTrack?t("footer",{staticClass:"fixed bottom-0 left-0 right-0 bg-gray-800 p-4 flex items-center"},[t("img",{staticClass:"w-16 h-16 object-cover mr-4",attrs:{src:e.currentTrack.albumCover||r(323),alt:"Pochette de l'album ".concat(e.currentTrack.albumName)}}),e._v(" "),t("div",{staticClass:"flex-1"},[t("p",{staticClass:"text-white font-semibold"},[e._v(e._s(e.currentTrack.name))]),e._v(" "),t("p",{staticClass:"text-gray-400"},[e._v(e._s(e.currentTrack.artist))])]),e._v(" "),t("div",{staticClass:"flex items-center space-x-4"},[t("button",{staticClass:"text-white hover:text-green-500",on:{click:e.pausePlayback}},[t("span",{staticClass:"material-icons text-3xl"},[e._v("pause_circle_filled")])])])]):e._e()])],1)}),[],!1,null,"313b03de",null);t.default=component.exports}}]);